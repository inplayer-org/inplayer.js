{"version":3,"file":"inplayer.cjs.js","sources":["../src/Models/User.js","../src/Models/Asset.js","../src/Models/Payment.js","../src/Models/Subscriptions.js","../src/Models/Misc.js"],"sourcesContent":["import * as Cookies from 'js-cookie';\r\n\r\nimport {\r\n  API\r\n} from '../../constants/endpoints';\r\n\r\nimport { config } from '../../config';\r\n\r\nclass User {\r\n\r\n  async signIn(data){\r\n    // Add into form data\r\n    const fd = new FormData();\r\n    fd.append('email', data.email);\r\n    fd.append('password', data.password);\r\n    fd.append('merchant_uuid', data.merchant_uuid);\r\n    fd.append('referrer', data.referrer);\r\n    // request\r\n    try{\r\n      const response = await fetch(API.signIn, {\r\n        method: 'POST',\r\n        body: fd,\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      /* set cookies */\r\n      if(data.access_token){\r\n        Cookies.set(config.INPLAYER_TOKEN_NAME, data.access_token);\r\n      }\r\n\r\n      return data;\r\n\r\n    } catch(error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  async signOut(){\r\n    const token = Cookies.get(config.INPLAYER_TOKEN_NAME);\r\n\r\n    try{\r\n      const response = await fetch(API.signOut, {\r\n          headers: {\r\n              'Authorization': 'Bearer ' + token\r\n          }\r\n      });\r\n\r\n      const data = await response.json();\r\n      // if response is okay\r\n      if(data.explain){\r\n        Cookies.remove(config.INPLAYER_TOKEN_NAME);\r\n      }\r\n      return true;\r\n\r\n    } catch(error){\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  async signUp(data) {\r\n\r\n    // Add into form data\r\n    const fd = new FormData();\r\n    fd.append('full_name', data.full_name);\r\n    fd.append('email', data.email);\r\n    fd.append('password', data.password);\r\n    fd.append('password_confirmation', data.password_confirmation);\r\n    fd.append('merchant_uuid', data.merchant_uuid);\r\n    fd.append('type', data.type);\r\n    fd.append('referrer', data.referrer);\r\n\r\n    try{\r\n      const response = await fetch(API.signUp, {\r\n        method: 'POST',\r\n        body: fd,\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n\r\n    }catch(error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  isSignedIn(){\r\n    return Cookies.get(config.INPLAYER_TOKEN_NAME) !== undefined;\r\n  }\r\n\r\n  token(){\r\n    return Cookies.get(config.INPLAYER_TOKEN_NAME);\r\n  }\r\n  setTokenInCookie(token){\r\n    Cookies.set(config.INPLAYER_TOKEN_NAME, token);\r\n  }\r\n\r\n  async requestNewPassword(data) {\r\n\r\n    // Add into from FormData\r\n    const fd = new FormData();\r\n    fd.append('email', data.email);\r\n    fd.append('merchant_uuid', data.merchant_uuid);\r\n\r\n    try {\r\n      const response = await fetch(API.requestNewPassword, {\r\n          method: 'POST',\r\n          body: fd\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n\r\n    }catch(error){\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  async setNewPassword(data, token) {\r\n\r\n        const body = `password=${data.password}&password_confirmation=${data.password_confirmation}`;\r\n\r\n        try{\r\n          const response = await fetch(API.setNewPassword(token),{\r\n            method: 'PUT',\r\n            body: body,\r\n            headers: {\r\n              'Content-Type': 'x-www-form-urlencoded'\r\n            }\r\n          });\r\n\r\n          const data = await response.json();\r\n\r\n          return data;\r\n\r\n        }catch(error){\r\n          return false;\r\n        }\r\n  }\r\n\r\n  async getAccountInfo(token) {\r\n    try{\r\n      const response = await fetch(API.getAccountInfo, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if(data)\r\n        return data;\r\n\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getSocialLoginUrls(state) {\r\n    try{\r\n      const response = await fetch(API.social(state), {\r\n        method: 'GET',\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if(data)\r\n        return data;\r\n\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async updateAccount(data, token) {\r\n    try{\r\n      const response = await fetch(API.updateAccount, {\r\n        method: 'PUT',\r\n        body: data,\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token,\r\n          'Content-Type': 'x-www-form-urlencoded'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async changePassword(data, token) {\r\n    try{\r\n      const response = await fetch(API.changePassword, {\r\n        method: 'POST',\r\n        body: data,\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getRegisterFields(merchant_uuid){\r\n    try{\r\n      const response = await fetch(API.getRegisterFields(merchant_uuid));\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport default User;\r\n","import {\r\n  API\r\n} from '../../constants/endpoints';\r\n\r\n\r\nclass Asset {\r\n\r\n  /*\r\n   * @desc Checks whether a given authenticated user has access for an asset\r\n   * @param {string} token The Authorization token\r\n   * @param {number} id The id of the asset\r\n   * @example\r\n   * InPlayer.Asset.checkAccessForAsset('eyJ0eXAiOiJKPECENR5Y',36320)\r\n   * .then(data => console.log(data));\r\n   * @return {Boolean}\r\n   */\r\n  async checkAccessForAsset(token, id){\r\n    try{\r\n      const response = await fetch(API.checkAccess(id), {\r\n          headers: {\r\n              'Authorization': 'Bearer ' + token\r\n          }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n\r\n    } catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async checkAccessForMultipleAssets(token, ids){\r\n    try{\r\n      const response = await fetch(API.checkAccess(ids, true), {\r\n          headers: {\r\n              'Authorization': 'Bearer ' + token\r\n          }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async findAsset(assetId, merchant_uuid){\r\n    try{\r\n      const response = await fetch(API.findAsset(assetId,merchant_uuid),{\r\n        method: 'GET',\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async findExternalAsset(assetType, externalId){\r\n    try{\r\n      const response = await fetch(API.findExternalAsset(assetType, externalId),{\r\n        method: 'GET',\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async findPackage(id){\r\n    try{\r\n      const response = await fetch(API.findPackage(id), {\r\n        method: 'GET',\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getAssetAccessFees(id) {\r\n    try{\r\n      const response = await fetch(API.findAccessFees(id), {\r\n        method: 'GET',\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async freemiumAsset(token, data) {\r\n    try{\r\n      const response = await fetch(API.freemium, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token\r\n        },\r\n        body: data\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default Asset;\r\n","import {\r\n  API\r\n} from '../../constants/endpoints';\r\n\r\n\r\nclass Payment {\r\n  async getPaymentMethod(merchant_uuid){\r\n    try{\r\n      const response = await fetch(API.getPaymentMethod(merchant_uuid),{\r\n        method: 'GET'\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getPaymentMethods(token){\r\n    try{\r\n      const response = await fetch(API.getPaymentMethods,{\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getPaymentTools(token, paymentMethodId){\r\n    try{\r\n      const response = await fetch(API.getPaymentTools(paymentMethodId), {\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async payForAsset(token, data) {\r\n    try{\r\n      const response = await fetch(API.payForAsset,{\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        },\r\n        body: data\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getPayPalParams(token, data) {\r\n    try{\r\n      const response = await fetch(API.externalPayments,{\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        },\r\n        body: data\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Payment;\r\n","import {\r\n  API\r\n} from '../../constants/endpoints';\r\n\r\nclass Subscriptions {\r\n\r\n  async getSubscriptions(token){\r\n    try{\r\n      const response = await fetch(API.getSubscriptions,{\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async cancelSubscription(unsubscribe_url, token){\r\n    try{\r\n      const response = await fetch(unsubscribe_url, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async assetSubscribe(token, data) {\r\n    try{\r\n      const response = await fetch(API.subscribe, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        },\r\n        body: data\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Subscriptions;\r\n","import {\r\n  API\r\n} from '../../constants/endpoints';\r\n\r\nclass Misc{\r\n  async getDlcLinks(token,assetId){\r\n    try{\r\n      const response = await fetch(API.getDlcLinks(assetId), {\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getDiscount(token, data) {\r\n    try{\r\n      const response = await fetch(API.getDiscount, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token\r\n        },\r\n        body: data\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getBranding(merchant_uuid) {\r\n    try{\r\n      const response = await fetch(API.getBranding(merchant_uuid), {\r\n        method: 'GET'\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async downloadProtectedFile(token, assetId, filename) {\r\n    try{\r\n      const response = await fetch(API.downloadFile(assetId, filename), {\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async fetchWPContent(url, token) {\r\n    try{\r\n      const response = await fetch(url, {\r\n        credentials: 'same-origin'\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    }catch(error){\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Misc;\r\n"],"names":["signOut","signUp","requestNewPassword","setNewPassword","getAccountInfo","getSocialLoginUrls","updateAccount","changePassword","getRegisterFields","checkAccessForMultipleAssets","findAsset","findExternalAsset","findPackage","getAssetAccessFees","freemiumAsset","getPaymentMethods","getPaymentTools","payForAsset","getPayPalParams","cancelSubscription","assetSubscribe","getDiscount","getBranding","downloadProtectedFile","fetchWPContent"],"mappings":"o5EAuCEA,mRAuBAC,6qBAsCAC,4QAuBAC,iTAsBAC,sNAkBAC,iLAgBAC,+PAmBAC,2NAkBAC,0XCvLAC,gNAgBAC,mKAcAC,mLAcAC,mKAcAC,6KAcAC,6ZCrFAC,qMAgBAC,sMAgBAC,wNAkBAC,gdC/CAC,iMAiBAC,gbCnBAC,qNAkBAC,kKAcAC,0MAgBAC"}